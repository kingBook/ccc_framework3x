const _0x16d0=['../../constant/namespace','loadingPage','preload','ready','ipcRenderer','new-window','removeBroadcastListener','defineProperty','basename','style','jpg','User','gif','jpeg',':hide-panel','#loading-page','get-sign-in-url-failed','refresh','info-title','info',':close','url','file-url','Message','total','callId','image','whether-close','select','update-toolbar','./node_modules','send','@base/electron-windows/package.json','./host-api.js','get-redirect-url','download-failed','canceled','name','select-image','beforeClose','filePath','template','get-sign-in-url','args','broadcast','save','readFileSync','image-filter-name','newMsgCount','download-with-progress','move','close','type','dirname','info-non-logged-in','#webview','channel','close-panel','select-file','file-filter-name','default','toString','./index.html','__esModule','@editor/panel/lib/element','addEventListener','__importDefault','openExternal','utf8',':panel-win-state-changed','save-file','../../common-lib/translate','download-succeeded','webview','addBroadcastListener','fileName','dom-ready',':force-close-panel','png','push','path','setAttribute','../../common-lib/dialog','join','src','electron','panels','file-selected'];(function(_0x4a6e4f,_0x526f96){const _0x16d0f2=function(_0x157dc6){while(--_0x157dc6){_0x4a6e4f['push'](_0x4a6e4f['shift']());}};_0x16d0f2(++_0x526f96);}(_0x16d0,0x87));const _0x157d=function(_0x4a6e4f,_0x526f96){_0x4a6e4f=_0x4a6e4f-0x90;let _0x16d0f2=_0x16d0[_0x4a6e4f];return _0x16d0f2;};const _0x76a82d=_0x157d;'use strict';var __importDefault=this&&this[_0x76a82d(0xa3)]||function(_0x424fc8){const _0x4137b0=_0x76a82d;return _0x424fc8&&_0x424fc8[_0x4137b0(0xa0)]?_0x424fc8:{'default':_0x424fc8};};Object[_0x76a82d(0xc0)](exports,_0x76a82d(0xa0),{'value':!0x0}),exports[_0x76a82d(0x94)]=exports[_0x76a82d(0xe0)]=exports[_0x76a82d(0xbc)]=exports['$']=exports['style']=exports[_0x76a82d(0xe2)]=void 0x0;const path_1=__importDefault(require(_0x76a82d(0xb1))),fs_1=__importDefault(require('fs')),electron_1=require(_0x76a82d(0xb6)),download_1=__importDefault(require('download')),file_url_1=__importDefault(require(_0x76a82d(0xcf))),translate_1=require(_0x76a82d(0xa8)),dialog_1=require(_0x76a82d(0xb3)),namespace_1=require(_0x76a82d(0xb9));module['paths'][_0x76a82d(0xb0)](path_1[_0x76a82d(0x9d)][_0x76a82d(0xb4)](Editor['App'][_0x76a82d(0xb1)],_0x76a82d(0xd7)));const element=require(_0x76a82d(0xa1)),windowsPkg=require(_0x76a82d(0xd9)),ipcFlag=windowsPkg[_0x76a82d(0xde)]+'@'+windowsPkg['version'];let forceClose=!0x1;const template=fs_1['default'][_0x76a82d(0xe7)](path_1[_0x76a82d(0x9d)][_0x76a82d(0xb4)](__dirname,_0x76a82d(0x9f)),_0x76a82d(0xa5));exports[_0x76a82d(0xe2)]=template;const style=fs_1['default']['readFileSync'](path_1[_0x76a82d(0x9d)][_0x76a82d(0xb4)](__dirname,'./style.css'),_0x76a82d(0xa5));exports['style']=style;const selector={'webview':_0x76a82d(0x98),'loadingPage':_0x76a82d(0xc8)};exports['$']=selector;let action=_0x76a82d(0xca);async function ready(){const _0x1a5cfd=_0x76a82d;if(forceClose=!0x1,Editor[_0x1a5cfd(0xd0)][_0x1a5cfd(0xab)](namespace_1['ns']+_0x1a5cfd(0xae),forceClosePanel),!await Editor[_0x1a5cfd(0xc4)]['isLoggedIn']())return await dialog_1[_0x1a5cfd(0xcc)](translate_1['tr'](_0x1a5cfd(0x97)),{'title':translate_1['tr'](_0x1a5cfd(0xcb)),'buttons':[translate_1['tr']('ok')],'default':0x0}),void Editor[_0x1a5cfd(0xd0)][_0x1a5cfd(0xe5)](namespace_1['ns']+':force-close-panel');this['$'][_0x1a5cfd(0xaa)]['addEventListener'](_0x1a5cfd(0xad),()=>{const _0x697313=_0x1a5cfd;Editor['Message']['send'](namespace_1['ns'],_0x697313(0xad));}),this['$'][_0x1a5cfd(0xaa)][_0x1a5cfd(0xb2)](_0x1a5cfd(0xbb),file_url_1[_0x1a5cfd(0x9d)](path_1['default'][_0x1a5cfd(0xb4)](__dirname,_0x1a5cfd(0xda)))),this['$'][_0x1a5cfd(0xaa)][_0x1a5cfd(0xa2)]('ipc-message',_0x5f0f20=>{const _0x4f420b=_0x1a5cfd;onIpcMessage(_0x5f0f20,this['$'][_0x4f420b(0xaa)],this['$'][_0x4f420b(0xba)]);});const _0x3cc632=await Editor[_0x1a5cfd(0xd0)]['request'](namespace_1['ns'],_0x1a5cfd(0xe3));if(!_0x3cc632)return dialog_1[_0x1a5cfd(0xcc)](translate_1['tr'](_0x1a5cfd(0xc9)),{'title':translate_1['tr'](_0x1a5cfd(0xcb))}),void Editor[_0x1a5cfd(0xd0)][_0x1a5cfd(0xe5)](namespace_1['ns']+_0x1a5cfd(0xae));this['$'][_0x1a5cfd(0xaa)][_0x1a5cfd(0xb5)]=_0x3cc632,this['$'][_0x1a5cfd(0xaa)][_0x1a5cfd(0xa2)](_0x1a5cfd(0xbe),async _0x563160=>{const _0x5d42f4=_0x1a5cfd;electron_1['shell'][_0x5d42f4(0xa4)](await Editor[_0x5d42f4(0xd0)]['request'](namespace_1['ns'],_0x5d42f4(0xdb),_0x563160[_0x5d42f4(0xce)]));}),electron_1[_0x1a5cfd(0xbd)]['on'](ipcFlag+_0x1a5cfd(0xcd),()=>{action='close';}),electron_1[_0x1a5cfd(0xbd)]['on'](namespace_1['ns']+_0x1a5cfd(0xa6),(_0x27bafe,_0x13b32a)=>{const _0x26bff1=_0x1a5cfd;try{this['$'][_0x26bff1(0xaa)][_0x26bff1(0xd8)](namespace_1['ns']+':panel-win-state-changed',_0x13b32a);}catch(_0x507497){}}),electron_1[_0x1a5cfd(0xbd)][_0x1a5cfd(0xd8)](namespace_1['ns']+':panel-ready');}async function beforeClose(_0x47f533={}){const _0x5e28fa=_0x76a82d;if(forceClose||_0x47f533[_0x5e28fa(0x93)]||element['panels']&&element[_0x5e28fa(0xb7)]['length']>0x1)return!0x0;if(_0x5e28fa(0xca)===action)return!0x0;action=_0x5e28fa(0xca);try{return!!await Editor[_0x5e28fa(0xd0)]['request'](namespace_1['ns'],_0x5e28fa(0xd4))||(electron_1[_0x5e28fa(0xbd)][_0x5e28fa(0xd8)](namespace_1['ns']+_0x5e28fa(0xc7)),!0x1);}catch(_0xceac2a){return!0x0;}}function close(){const _0x4c4c12=_0x76a82d;Editor[_0x4c4c12(0xd0)][_0x4c4c12(0xbf)](namespace_1['ns']+_0x4c4c12(0xae),forceClosePanel);}function onIpcMessage(_0x21d4c2,_0x1ddd98,_0x466f6f){const _0x12ae0b=_0x76a82d;async function _0x2b24fe(_0x441b31){const _0x3e2c01=_0x157d,_0x383fba=_0x21d4c2['args'][0x0][_0x3e2c01(0x95)],_0x5e0c6c=_0x21d4c2[_0x3e2c01(0xe4)][0x0][_0x3e2c01(0xac)];let _0x22e08b=null;_0x22e08b=_0x3e2c01(0xd3)===_0x383fba?{'title':translate_1['tr']('save-image'),'path':_0x5e0c6c,'filters':[{'name':translate_1['tr'](_0x3e2c01(0x90)),'extensions':[_0x3e2c01(0xc3),_0x3e2c01(0xc6),_0x3e2c01(0xaf),_0x3e2c01(0xc5)]}]}:{'title':translate_1['tr'](_0x3e2c01(0xa7)),'path':_0x5e0c6c,'filters':[{'name':translate_1['tr'](_0x3e2c01(0x9c)),'extensions':['*']}]};const _0x4d9642=await dialog_1[_0x3e2c01(0xe6)](_0x22e08b);if(!_0x4d9642[_0x3e2c01(0xe1)])return void(_0x441b31&&_0x1ddd98[_0x3e2c01(0xd8)]('download-canceled',_0x21d4c2[_0x3e2c01(0xe4)][0x0][_0x3e2c01(0xd2)]));const _0x31093c=_0x21d4c2['args'][0x0]['url'],_0x396dec=path_1[_0x3e2c01(0x9d)][_0x3e2c01(0x96)](_0x4d9642[_0x3e2c01(0xe1)]),_0x35ee2b=download_1[_0x3e2c01(0x9d)](_0x31093c,_0x396dec,{'filename':path_1[_0x3e2c01(0x9d)][_0x3e2c01(0xc1)](_0x4d9642[_0x3e2c01(0xe1)])});if(_0x441b31){_0x35ee2b['on']('downloadProgress',_0x54eba0=>{const _0xa905e=_0x3e2c01;_0x1ddd98[_0xa905e(0xd8)]('download-progress',{'callId':_0x21d4c2['args'][0x0][_0xa905e(0xd2)],'percent':_0x54eba0['percent'],'transferred':_0x54eba0['transferred'],'total':_0x54eba0[_0xa905e(0xd1)]});});try{await _0x35ee2b,_0x1ddd98['send'](_0x3e2c01(0xa9),_0x21d4c2['args'][0x0][_0x3e2c01(0xd2)]);}catch(_0x57806e){_0x1ddd98[_0x3e2c01(0xd8)](_0x3e2c01(0xdc),{'callId':_0x21d4c2[_0x3e2c01(0xe4)][0x0]['callId'],'errorStr':_0x57806e[_0x3e2c01(0x9e)]()});}}}switch(_0x21d4c2[_0x12ae0b(0x99)]){case'new-msg':Editor[_0x12ae0b(0xd0)][_0x12ae0b(0xd8)](namespace_1['ns'],_0x12ae0b(0xd6),{'newMsgCount':_0x21d4c2['args'][0x0][_0x12ae0b(0x91)]});break;case'is-ready':_0x466f6f[_0x12ae0b(0xc2)]['display']='none';break;case'download':_0x2b24fe(!0x1);break;case _0x12ae0b(0x9b):!async function(){const _0x192e82=_0x12ae0b,_0x4fbf16=await function(){const _0x483718=_0x157d;let _0x2339ca;return _0x2339ca='image'===_0x21d4c2[_0x483718(0xe4)][0x0][_0x483718(0x95)]?{'title':translate_1['tr'](_0x483718(0xdf)),'filters':[{'name':translate_1['tr'](_0x483718(0x90)),'extensions':[_0x483718(0xc3),_0x483718(0xc6),'png',_0x483718(0xc5)]}]}:{'title':translate_1['tr'](_0x483718(0x9b)),'filters':[{'name':translate_1['tr'](_0x483718(0x9c)),'extensions':['*']}]},dialog_1[_0x483718(0xd5)](_0x2339ca);}();_0x4fbf16[_0x192e82(0xdd)]?_0x1ddd98[_0x192e82(0xd8)]('file-selected',''):_0x1ddd98[_0x192e82(0xd8)](_0x192e82(0xb8),_0x4fbf16['filePaths'][0x0]);}();break;case _0x12ae0b(0x92):_0x2b24fe(!0x0);}}function forceClosePanel(){const _0x1bc5fb=_0x76a82d;forceClose=!0x0,Editor[_0x1bc5fb(0xd0)][_0x1bc5fb(0xd8)](namespace_1['ns'],_0x1bc5fb(0x9a));}exports[_0x76a82d(0xbc)]=ready,exports[_0x76a82d(0xe0)]=beforeClose,exports[_0x76a82d(0x94)]=close;